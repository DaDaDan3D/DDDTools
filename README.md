# DDDTools
自分用に作った雑多なツールをアドオンとしてまとめたものです。
Blender 3.1 以降用。
エラー処理が甘かったりするので、自己責任でお使いくださいませ。

## インストール
[Release](https://github.com/DaDaDan3D/DDDTools/releases) から最新版をダウンロードし、Blender の 編集 > プリファレンス > アドオン からインストールしてください。

## 使い方
3Dビューの右上の < を押すかキーボードの N を押すかすると出てくるツールシェルフの DDDTools タブにパネルがまとまっています。

### SelectTool / 分割線の選択
四角形を単純に二つに分割するエッジループを、様々な条件で選択したり、そのまま溶解してポリゴン数を削減したりするツールです。
サブディビジョンサーフェスモディファイアやループカットツールなどで増えすぎたポリゴンを減らすのに使えます。
四角形を四角形のままでポリゴン数を減らすので、形状が崩れにくく、また、再びサブディビジョンサーフェスなどをかけたりすることも容易にできます。

https://user-images.githubusercontent.com/108515309/176945519-75593817-c7df-43fa-a9d9-741d84cf078d.mp4


### MaterialTool / テクスチャ selectObjects
指定したテクスチャを使っているオブジェクトを選択します。

### MaterialTool / テクスチャ listupMaterials
指定したテクスチャを使っているマテリアルを情報に表示します。

### MaterialTool / テクスチャ setupMaterialContainerObject
アクティブなオブジェクトに対して、既存のマテリアルの割り当てを解除した後、指定したテクスチャを使っているマテリアルを全て登録します。
マテリアル一覧的な使い方ができます。

### MaterialTool / テクスチャ selectNodes
指定したテクスチャを使っているマテリアルのシェーダーノードを選択してアクティブ状態にします。
テクスチャをベイクする時などに使います。

### MaterialTool / マテリアル selectObjects
指定したマテリアルを使っているオブジェクトを選択します。

### MaterialTool / マテリアル listupObjects
指定したテクスチャを使っているオブジェクトを情報に表示します。

### ColliderTool / コライダ追加
アクティブなアーマチュアのボーンに対して、指定したメッシュを参照した当たり判定用の Empty 球を追加します。
実行後、プロパティパネルで調整ができます。
VRM のコライダ用です。
(今はうまく動かないかも……)

### BoneTool / 子ボーンをリネーム
アクティブなボーンの子供のボーンの名前を、番号付きでリネームします。

### BoneTool / リセットストレッチ
アクティブなアーマチュアに含まれる全てのボーンのストレッチモディファイアの長さをリセットします。

### BoneTool / 現在の姿勢をレストポーズに
アクティブなアーマチュアの現在の姿勢をレストポーズとして設定します。
アーマチュアのメッシュの変形の状態をそのまま保とうとするので、A ポーズを T ポーズにしたい時などに使えます。

### WeightTool / ウェイトのリセット
選択した全てのメッシュのウェイトをゼロにリセットします。

### WeightTool / ウェイトのクリーンアップ
選択した全てのメッシュのウェイトに対して「クリーン」「合計を制限」「すべてを正規化」を行い、頂点グループに対して「ボーン階層でソート」を行った後、対応するボーンの存在しない頂点グループを削除します。

### WeightTool / ウェイトの転送
選択した全てのメッシュに対して、指定したメッシュから頂点ウェイトを転送します。
ワンボタンで転送できるので、データ転送モディファイアやウェイトペイントを使うよりも楽です。

### WeightTool / 頂点の左右ウェイト均一化
選択した全ての頂点に対して、左右のボーンに均等にウェイトが乗るようにします。
ただし、ボーンの名前の末尾が \_L, \_R, -L, -R, .L, .R になっている必要があります。(番号ではダメ)
例えば Arm_L:0.2 Arm_R:0.5 になっているような頂点は Arm_L:0.35 Arm_R:0.35 になります。
ミラーの境界面上の点に対して実行すると良いです。

### WeightTool / 選択した骨の溶解
選択した全てのボーンに対して、頂点ウェイトを直近の祖先の変形ボーンに移し替えて溶解します。
スキニングが終わった後に中間のボーンを溶解したくなった時に便利です。

### Aproximate / 近似球の追加
選択した頂点に近似した球オブジェクトを追加します。
頂点は 4 つ以上選択している必要があります。
(点郡の球面近似アルゴリズムはDr.レオさん作の fitting.py を使用させていただいております)
https://programming-surgeon.com/script/sphere-fit/


## License
MIT



